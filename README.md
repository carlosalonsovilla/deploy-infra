# Overview

This repository automates the creation of a cloud infrastructure using Terraform and Ansible. The project begins by using Terraform to deploy an EC2 instance in AWS. Once the instance is up, Ansible will be used to install Apache, set up a web server, deploy a basic HTML website, and configure HTTPS using a self-signed SSL certificate. This project provides hands-on experience with cloud automation, infrastructure-as-code (IaC), configuration management, and security through SSL.

## Terraform and Ansible: EC2 Deployment and Apache Web Server Setup with HTTPS

### Steps:
1. **Terraform** is used to:
   - Create an EC2 instance in AWS.
   - Configure security groups to allow SSH and HTTPS traffic.
   - Generate an SSH key pair for secure access to the instance.
   - Use environment variables to keep sensitive data like the public IP from being hardcoded in the scripts.


2. **Ansible** is used to:
   - SSH into the EC2 instance.
   - Install Apache on the server.
   - Deploy an HTML template file to the web root directory.
   - Configure the web server to serve traffic over HTTPS using a self-signed SSL certificate.


## Prerequisites
- AWS account with necessary permissions to create EC2 instances.
- Terraform installed on your machine.
- Ansible installed on your machine.
- SSH access to the EC2 instance using the private key.
- OpenSSL installed

## How to Run
1. Clone this repository.
2. Initialize Terraform:
   ```bash
   terraform init
   ```
3. Apply the terraform config.
   ```bash
   export PUBLIC_IP="<YOUR_PUBLIC_IP>"
   terraform plan
   terraform apply -var "public_ip=$PUBLIC_IP"
   ```
4. This will generate an SSH key pair and create an EC2 instance. 

## Ansbile Steps
1. Export your EC2 Public IP
   ```bash
      export EC2_PUBLIC_IP="your-public-ip"
   ```
2. Run the Ansbile Playbooks
   - Install Apace and deploy website:
   ```bash
      ansible-playbook -i inventory.yml install_apache.yml
   ```
   - Configure HTTPS with Self-Signed SSL:
   ```bash
      ansible-playbook -i inventory.yml serve_https.yml
   ```

## Project Structure
1. **teraform/**: Contains Terraform config files
   - **main.tf**: The primary terraform file that sets up the EC2 instance and security groups
   - **terraform.tfstate**: The state file generated by terrafrom to track resources
2. **ansible/**: Contains ansible playbooks and inventory files
   - **install_apache.yml**: Ansible playbook to install apache and deploy website
   - **serve_https.yml**: Ansible playbook to configure HTTPS using a self-signed SSL certificate
   - **inventory.yml**: Ansible inventory file that uses environemt variables for the EC2 intance's public IP

## Clean up
   - To teardown the infrastructure and avoid charges:
   ```bash
      terraform destroy
   ```
   - This will stop and remove the EC2 instance, security groups, and any other resources created by terrafrom


